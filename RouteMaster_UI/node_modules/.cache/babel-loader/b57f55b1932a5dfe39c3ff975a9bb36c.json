{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\2317761\\\\OneDrive - Cognizant\\\\BusEase-reactjs-springboot\\\\RouteMaster_UI\\\\src\\\\components\\\\Ticket.js\";\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { Component } from 'react';\nimport ReactToPrint from 'react-to-print';\nimport '../assets/css/TicketStyle.css';\nimport busBG from \"../assets/images/bus.jpg\";\nimport Footer from './Footer';\nimport Header from './Header'; // import { send } from 'emailjs-com';\n\n/** \n * \n * This component will display, print and email ticket\n * taking data from local storage\n * Uses emailjs library for sending emails to user\n * uses external style sheet\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Ticket extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSeats = () => {\n      this.props.history.push('/seats');\n    };\n\n    if (!localStorage.getItem('user')) {\n      this.props.history.push('/login');\n    } else {\n      if (localStorage.getItem('ticket') !== null) {\n        console.log('if');\n        console.log(localStorage.getItem('ticket'));\n        this.ticket = JSON.parse(localStorage.getItem('ticket'));\n        this.airplane = JSON.parse(localStorage.getItem('plane')); // localStorage.removeItem('ticket')\n      } else {\n        console.log('else');\n        this.ticket = JSON.parse(localStorage.getItem('view-ticket'));\n        localStorage.removeItem('view-ticket');\n      }\n\n      console.log(\"Ticket: \" + this.ticket);\n      this.passengers = this.ticket.booking.passengers;\n      console.log(\"TN: \" + this.ticket.ticketNumber);\n      console.log(\"Source: \" + this.ticket.booking.bus.source);\n      console.log(\"Dst: \" + this.ticket.booking.bus.destination);\n      console.log(\"AR Time: \" + this.ticket.booking.bus.arrivalTime);\n      console.log(\"DR Time: \" + this.ticket.booking.bus.departureTime);\n      console.log(\"Booking Date: \" + this.ticket.booking_date);\n      console.log(\"Total Pay: \" + this.ticket.total_pay);\n      console.log(\"Passengers: \" + JSON.stringify(this.passengers));\n    }\n  }\n\n  componentDidMount() {\n    if (!localStorage.getItem('user')) {\n      this.props.history.push('/login');\n    }\n  }\n\n  /** \n   * this method will interact with emailjs library and mail ticket details to user\n   * takes user data from local storage\n  */\n  // onMail = () => {\n  //     let msg = 'Your ticket is Confirmed with number : ' + this.ticket.ticketNumber;\n  //     let src = 'Source : ' + this.ticket.booking.bus.source;\n  //     let dst = 'Destination : ' + this.ticket.booking.bus.destination;\n  //     let travel_date = 'Travel Date : ' + this.ticket.booking.bus.travelDate;\n  //     let tosend = {\n  //             from_name: 'BookMyBus',\n  //             to_name: JSON.parse(localStorage.getItem('user')).fname,\n  //             message: msg,\n  //             source : src,\n  //             destination : dst,\n  //             travelDate : travel_date,\n  //             reply_to: JSON.parse(localStorage.getItem('user')).email,\n  //             }\n  //     send(\n  //         'service_enui0by',\n  //         'template_xkbuxqd',\n  //         tosend,  \n  //         'user_yzrYhjB6DwK4wPq69r043'\n  //       )\n  //         .then((response) => {\n  //           console.log('SUCCESS!', response.status, response.text);\n  //           alert('Your ticket details has been emailed !!')\n  //         })\n  //         .catch((err) => {\n  //           console.log('FAILED...', err);\n  //         });\n  // }\n  render() {\n    if (!this.ticket) {\n      return null;\n    }\n\n    this.psg_name = this.passengers.map(psg => {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [psg.pname, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 47\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 29\n      }, this);\n    });\n    this.psg_age = this.passengers.map(psg => {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [psg.age, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 44\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 29\n      }, this);\n    });\n    this.psg_gender = this.passengers.map(psg => {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [psg.gender, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 35\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"pt-3\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"py-5\",\n        style: {\n          backgroundImage: `url(${busBG})`,\n          backgroundSize: 'cover',\n          overflow: 'hidden',\n          height: '700px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'right',\n            marginRight: '90pt',\n            marginTop: '130pt'\n          },\n          children: /*#__PURE__*/_jsxDEV(ReactToPrint // trigger={() => <a class=\"btn text-light bg-dark\" role=\"button\" href=\"#\">Print The Ticket</a>}\n          , {\n            trigger: () => /*#__PURE__*/_jsxDEV(\"a\", {\n              class: \"btn btn btn-primary\",\n              role: \"button\",\n              href: \"#\",\n              children: \"Print The Ticket\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 32\n            }, this),\n            content: () => this.componentRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"box pt-2\",\n          ref: el => this.componentRef = el,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"ticket\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"buseasy\",\n              children: \"RouteMaster\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"boarding\",\n              children: [\"Boarding : \", this.ticket.booking.bus.source]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"content\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"jfk\",\n                children: this.ticket.booking.bus.source\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"sfo\",\n                children: this.ticket.booking.bus.destination\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"sub-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"watermark\",\n                  children: \"RouteMaster\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"name\",\n                  children: [\"Passenger Name\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 54\n                  }, this), this.psg_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"age\",\n                  children: [\"Passenger Age\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 52\n                  }, this), this.psg_age]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"gender\",\n                  children: [\"Passenger Gender\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 58\n                  }, this), this.psg_gender]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"bus\",\n                  children: [\"BusNo.\\xB0\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 50\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: this.ticket.booking.bus.busNumber\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 21\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 70\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"gate\",\n                  children: [\"TicketNo.\\xB0 \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 55\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: this.ticket.ticketNumber\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 61\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"amount\",\n                  children: [\"Amount Paid\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"\\u20B9\", this.ticket.total_pay]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 25\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 63\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"boardingtime\",\n                  children: [\"Departure Time\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 62\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: this.ticket.booking.bus.arrivalTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 68\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"traveldate\",\n                  children: [\"Travel Date\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: this.ticket.booking.bus.travelDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 63\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"departuretime\",\n                  children: [\"Arrival Time\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 61\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: this.ticket.booking.bus.departureTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 67\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"barcode\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"script\", {\n            src: \"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 8\n    }, this);\n  }\n\n}\n\nexport default Ticket;","map":{"version":3,"sources":["C:/Users/2317761/OneDrive - Cognizant/BusEase-reactjs-springboot/RouteMaster_UI/src/components/Ticket.js"],"names":["React","Component","ReactToPrint","busBG","Footer","Header","Ticket","constructor","props","onSeats","history","push","localStorage","getItem","console","log","ticket","JSON","parse","airplane","removeItem","passengers","booking","ticketNumber","bus","source","destination","arrivalTime","departureTime","booking_date","total_pay","stringify","componentDidMount","render","psg_name","map","psg","pname","psg_age","age","psg_gender","gender","backgroundImage","backgroundSize","overflow","height","textAlign","marginRight","marginTop","componentRef","el","busNumber","travelDate"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { Component } from 'react';\nimport ReactToPrint from 'react-to-print';\nimport '../assets/css/TicketStyle.css';\nimport busBG from \"../assets/images/bus.jpg\";\nimport Footer from './Footer';\nimport Header from './Header';\n// import { send } from 'emailjs-com';\n\n\n/** \n * \n * This component will display, print and email ticket\n * taking data from local storage\n * Uses emailjs library for sending emails to user\n * uses external style sheet\n*/\nclass Ticket extends Component {\n    \n    constructor(props){\n        super(props)\n        if(!localStorage.getItem('user'))\n        {\n            this.props.history.push('/login')\n        }\n        else{\n        if(localStorage.getItem('ticket') !==null){\n            console.log('if')\n            console.log(localStorage.getItem('ticket'))\n            this.ticket=JSON.parse(localStorage.getItem('ticket'))\n            this.airplane = JSON.parse(localStorage.getItem('plane'))\n            // localStorage.removeItem('ticket')\n        }\n        else{\n            console.log('else')\n            this.ticket=JSON.parse(localStorage.getItem('view-ticket'))\n            localStorage.removeItem('view-ticket')\n        }\n        console.log(\"Ticket: \"+ this.ticket)\n        this.passengers = this.ticket.booking.passengers\n        console.log(\"TN: \"+ this.ticket.ticketNumber)\n        console.log(\"Source: \" + this.ticket.booking.bus.source)\n        console.log(\"Dst: \" + this.ticket.booking.bus.destination)\n        console.log(\"AR Time: \"+ this.ticket.booking.bus.arrivalTime)\n        console.log(\"DR Time: \"+ this.ticket.booking.bus.departureTime)\n        console.log(\"Booking Date: \"+ this.ticket.booking_date)\n        console.log(\"Total Pay: \"+ this.ticket.total_pay)\n        console.log(\"Passengers: \"+ JSON.stringify(this.passengers))\n    }\n        \n    }\n\n    componentDidMount(){\n        if(!localStorage.getItem('user'))\n        {\n            this.props.history.push('/login')\n        }\n       \n    }\n\n\n    onSeats = () =>{\n        this.props.history.push('/seats')\n    }\n\n    /** \n     * this method will interact with emailjs library and mail ticket details to user\n     * takes user data from local storage\n    */\n    // onMail = () => {\n\n    //     let msg = 'Your ticket is Confirmed with number : ' + this.ticket.ticketNumber;\n    //     let src = 'Source : ' + this.ticket.booking.bus.source;\n    //     let dst = 'Destination : ' + this.ticket.booking.bus.destination;\n    //     let travel_date = 'Travel Date : ' + this.ticket.booking.bus.travelDate;\n\n    //     let tosend = {\n    //             from_name: 'BookMyBus',\n    //             to_name: JSON.parse(localStorage.getItem('user')).fname,\n    //             message: msg,\n    //             source : src,\n    //             destination : dst,\n    //             travelDate : travel_date,\n    //             reply_to: JSON.parse(localStorage.getItem('user')).email,\n    //             }\n    //     send(\n    //         'service_enui0by',\n    //         'template_xkbuxqd',\n    //         tosend,  \n    //         'user_yzrYhjB6DwK4wPq69r043'\n    //       )\n    //         .then((response) => {\n    //           console.log('SUCCESS!', response.status, response.text);\n    //           alert('Your ticket details has been emailed !!')\n    //         })\n    //         .catch((err) => {\n    //           console.log('FAILED...', err);\n    //         });\n    // }\n\n\n    render() {\n        if(!this.ticket){\n            return null\n        }\n\n        this.psg_name = this.passengers.map(psg => {\n                        return(\n                            <span>{psg.pname} <br/></span> \n                            \n                            )    \n                        })\n\n        this.psg_age = this.passengers.map(psg => {\n                        return(\n                            <span>{psg.age}<br/></span> \n                            )    \n                        })\n\n        this.psg_gender = this.passengers.map(psg => {\n            return(\n                <span>{psg.gender}<br/></span> \n                )    \n            })\n        \n        \n    return (\n\n       <div class='pt-3'>\n        <Header />\n        <div class=\"py-5\" style={{backgroundImage: `url(${busBG})`,backgroundSize:'cover' ,overflow: 'hidden', height: '700px'}}>\n        \n            <div style={{textAlign:'right', marginRight:'90pt', marginTop:'130pt'}}>\n            <ReactToPrint \n                // trigger={() => <a class=\"btn text-light bg-dark\" role=\"button\" href=\"#\">Print The Ticket</a>}\n                trigger={() => <a class=\"btn btn btn-primary\" role=\"button\" href=\"#\">Print The Ticket</a>}\n                content={() => this.componentRef}\n            />\n            </div>\n\n            {/* <div style={{textAlign:'right', marginRight:'95pt', marginTop:'15pt'}}>\n                <button class='btn text-light bg-dark' onClick={this.onMail}>Mail My Ticket</button>\n            </div> */}\n\n            <div class=\"box pt-2\" ref={el => (this.componentRef = el)}>\n            <div class=\"ticket\">\n                <span class=\"buseasy\">RouteMaster</span>\n                <span class=\"boarding\">Boarding : {this.ticket.booking.bus.source}</span>\n                <div class=\"content\">\n                <span class=\"jfk\">{this.ticket.booking.bus.source}</span>\n    \n                <span class=\"sfo\">{this.ticket.booking.bus.destination}</span>\n                \n                <div class=\"sub-content\">\n                    <span class=\"watermark\">RouteMaster</span>\n                    <span class=\"name\">Passenger Name<br />\n                    {this.psg_name}\n                    </span>\n\n                    <span class=\"age\">Passenger Age<br />\n                    {this.psg_age}\n                    </span>\n\n                    <span class=\"gender\">Passenger Gender<br />\n                    {this.psg_gender}\n                    </span>\n\n                    <span class=\"bus\">BusNo.&deg;<br />\n                    <span>{this.ticket.booking.bus.busNumber}</span> <br />\n                    </span>\n\n                    <span class=\"gate\">TicketNo.&deg; <br /><span>{this.ticket.ticketNumber}</span></span>\n                    \n                    <span class=\"amount\">Amount Paid<br />\n                        <span>â‚¹{this.ticket.total_pay}</span> <br />\n                    </span>\n\n                    <span class=\"boardingtime\">Departure Time<br /><span>{this.ticket.booking.bus.arrivalTime}</span></span>\n                    <span class=\"traveldate\">Travel Date<br /><span>{this.ticket.booking.bus.travelDate}</span></span>\n                    <span class=\"departuretime\">Arrival Time<br /><span>{this.ticket.booking.bus.departureTime}</span></span>\n                \n                </div>\n                </div>\n                <div class=\"barcode\"></div>\n            </div>\n            \n                <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>\n            </div>\n            \n            </div>\n            <Footer />\n            </div>\n        )\n    }\n}\nexport default Ticket;"]},"metadata":{},"sourceType":"module"}