{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\2317761\\\\OneDrive - Cognizant\\\\BusEase-reactjs-springboot\\\\RouteMaster_UI\\\\src\\\\components\\\\BusListAdmin.js\";\nimport React, { Component } from 'react';\nimport BusServiceRest from '../services/BusServiceRest';\nimport plane from '../assets/images/travel1.jpg';\nimport Header from './Header';\n/**\n * \n * this component renders list of all buses\n * BusServiceRest : Service for fetching all buses from database\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BusListAdmin extends Component {\n  constructor(props) {\n    super(props); // this.service = new BusService();\n\n    this.getBuses = () => {\n      this.service.getBuses().then(data => {\n        console.log(data);\n        this.setState({\n          buses: data\n        });\n      });\n    };\n\n    this.onDelete = fid => {\n      if (window.confirm(\"Are you sure you want to delete the bus \" + fid + \" ?\")) {\n        this.service.deleteBus(fid).then(response => {\n          this.getBuses();\n        });\n      }\n    };\n\n    this.onEdit = bus => {\n      localStorage.setItem('bus', JSON.stringify(bus));\n      console.log(\"bus to be updated : \", localStorage.getItem('bus'));\n      this.props.history.push('/updateBus');\n    };\n\n    this.calculateDuration = f => {\n      let t1 = new Date('1970-01-01T' + f.departureTime + 'Z');\n      let t2 = new Date('1970-01-01T' + f.arrivalTime + 'Z');\n      let hour = t1.getUTCHours() - t2.getUTCHours();\n      let min = t1.getUTCMinutes() - t2.getUTCMinutes();\n\n      if (hour < 0) {\n        hour = 12 + hour;\n      }\n\n      if (min < 0) {\n        min = 60 + min;\n      }\n\n      return hour + 'hr ' + min + 'min';\n    };\n\n    this.service = new BusServiceRest();\n    this.state = {};\n\n    if (!localStorage.getItem('user')) {\n      alert('Please Login');\n      this.props.history.push('/login');\n    } else {\n      if (JSON.parse(localStorage.getItem('user')).isadmin === 1) {} else {\n        alert('Access Denied');\n        this.props.history.push('/');\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.getBuses();\n  }\n  /**\n   * This method interacts with service to fetch all buses\n   */\n\n\n  render() {\n    if (!localStorage.getItem('user')) {\n      if (!this.state.buses) return null;\n    } else {\n      if (JSON.parse(localStorage.getItem('user')).isadmin === 1) if (!this.state.buses) return null;\n    }\n\n    const buslist = this.state.buses.map(f => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card m-4 \",\n        style: {\n          width: 350,\n          height: \"fit-content\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header\",\n          children: /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\"Bus \", f.busNumber]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Source\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.source\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Destination\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.destination\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Travel Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.travelDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Departure Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.arrivalTime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Arrival Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.departureTime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Duration\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: this.calculateDuration(f)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Fare\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Available Seats\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.availableSeats\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-dark mr-3\",\n            onClick: () => this.onDelete(f.busNumber),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-info\",\n            onClick: () => this.onEdit(f),\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundImage: `url(${plane})`,\n        overflow: 'hidden',\n        height: '20000px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pt-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pt-3\",\n          style: styling.wrapper,\n          children: buslist\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nlet styling = {\n  wrapper: {\n    height: \"700px\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"center\"\n  }\n};\nexport default BusListAdmin;","map":{"version":3,"sources":["C:/Users/2317761/OneDrive - Cognizant/BusEase-reactjs-springboot/RouteMaster_UI/src/components/BusListAdmin.js"],"names":["React","Component","BusServiceRest","plane","Header","BusListAdmin","constructor","props","getBuses","service","then","data","console","log","setState","buses","onDelete","fid","window","confirm","deleteBus","response","onEdit","bus","localStorage","setItem","JSON","stringify","getItem","history","push","calculateDuration","f","t1","Date","departureTime","t2","arrivalTime","hour","getUTCHours","min","getUTCMinutes","state","alert","parse","isadmin","componentDidMount","render","buslist","map","width","height","busNumber","source","destination","travelDate","price","availableSeats","backgroundImage","overflow","styling","wrapper","display","flexWrap","justifyContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport BusServiceRest from '../services/BusServiceRest';\nimport plane from '../assets/images/travel1.jpg';\nimport Header from './Header';\n\n/**\n * \n * this component renders list of all buses\n * BusServiceRest : Service for fetching all buses from database\n */\nclass BusListAdmin extends Component {\n    constructor(props) {\n        super(props);\n        // this.service = new BusService();\n        this.service = new BusServiceRest();\n                this.state = {\n                    }\n        if(!localStorage.getItem('user')){\n            alert('Please Login')\n            this.props.history.push('/login')\n            \n        }\n        else{\n            if(JSON.parse(localStorage.getItem('user')).isadmin === 1 ){\n                \n            }\n            else{\n                alert('Access Denied')\n                this.props.history.push('/')\n               \n            }\n        }\n    }\n       \n\n    componentDidMount() {\n        this.getBuses();\n    }\n\n    /**\n     * This method interacts with service to fetch all buses\n     */\n    getBuses = () => {\n        this.service.getBuses().then(data => {\n            console.log(data);\n            this.setState({buses : data})\n        })\n    }\n\n    /**\n     * This method interacts with service to delete bus\n    */\n    onDelete = (fid) => {  \n\n        if(window.confirm(\"Are you sure you want to delete the bus \" + fid + \" ?\")) {\n            this.service.deleteBus(fid).then(response => {\n                this.getBuses();\n            })\n        }\n    }\n\n    /**\n     * This method stores bus data in local storage and redirects to UpdateBus\n    */\n    onEdit = (bus) => {\n        localStorage.setItem('bus', JSON.stringify(bus));\n        console.log(\"bus to be updated : \",localStorage.getItem('bus'));\n        this.props.history.push('/updateBus');\n    }\n\n    /**\n     * this method calculate travel duration\n     */\n    calculateDuration = (f) => {\n        let t1 = new Date('1970-01-01T' + f.departureTime + 'Z')\n        let t2 = new Date('1970-01-01T' + f.arrivalTime + 'Z')\n        let hour = t1.getUTCHours() - t2.getUTCHours()\n        let min = t1.getUTCMinutes() - t2.getUTCMinutes()\n\n        if( hour < 0)\n        {\n            hour = 12+hour\n        }\n        if(min < 0){\n            min = 60+min\n        }\n\n        return (hour +'hr '+min + 'min')\n\n    }\n\n    render() {\n        if(!localStorage.getItem('user')){\n            if(!this.state.buses)\n                return null;\n        }\n        else{\n            if(JSON.parse(localStorage.getItem('user')).isadmin === 1  )\n                if(!this.state.buses)\n                    return null;\n        }\n        \n       \n\n        const buslist = this.state.buses.map(f => {\n            return (\n                <div className=\"card m-4 \" style={{width: 350, height: \"fit-content\"}}>\n                    \n                        <div className=\"card-header\">\n                            <h5>Bus {f.busNumber}</h5>\n                        </div>\n                        \n                        <div className=\"card-body\">\n                        <div className=\"row mb-2\">\n                            <div className=\"col fw-bold\">Source</div>\n                            <div className=\"col\">{f.source}</div>\n                        </div>\n                        <div className=\"row mb-2\">\n                            <div className=\"col fw-bold\">Destination</div>\n                            <div className=\"col\">{f.destination}</div>\n                        </div>\n                        <div className=\"row mb-2\">\n                            <div className=\"col fw-bold\">Travel Date</div>\n                            <div className=\"col\">{f.travelDate}</div>\n                        </div>  \n                        <div className=\"row mb-2\">\n                            <div className=\"col fw-bold\">Departure Time</div>\n                            <div className=\"col\">{f.arrivalTime}</div>\n                        </div>\n                        <div className=\"row mb-2\">\n                            <div className=\"col fw-bold\">Arrival Time</div>\n                            <div className=\"col\">{f.departureTime}</div>\n                        </div>    \n                        <div className=\"row mb-2\">\n                            <div className=\"col fw-bold\">Duration</div>\n                            <div className=\"col\">{this.calculateDuration(f)}</div>\n                        </div>\n                        <div className=\"row mb-2\">\n                            <div className=\"col fw-bold\">Fare</div>\n                            <div className=\"col\">{f.price}</div>\n                        </div>  \n                        <div className=\"row mb-2\">\n                            <div className=\"col fw-bold\">Available Seats</div>\n                            <div className=\"col\">{f.availableSeats}</div>\n                        </div>  \n                        <br/>\n                            <button className=\"btn btn-dark mr-3\" onClick={() => this.onDelete(f.busNumber)}>Delete</button>\n                            <button className=\"btn btn-info\" onClick={() => this.onEdit(f)}>Edit</button>\n                        </div>\n                        \n                    \n                </div>\n            )\n        });\n\n        return (\n            <div style={{backgroundImage: `url(${plane})`,overflow: 'hidden', height: '20000px'}}>\n                <Header/>\n                <div className=\"pt-5\">\n                <div className=\"pt-3\"  style={styling.wrapper}>\n                {buslist}\n                </div>\n            </div>\n            </div>\n        );\n    }\n}\n\nlet styling = { \n    wrapper : {\n        height: \"700px\",\n        display : \"flex\", \n        flexWrap: \"wrap\", \n        justifyContent: \"center\"\n    }\n}\n\nexport default BusListAdmin;"]},"metadata":{},"sourceType":"module"}